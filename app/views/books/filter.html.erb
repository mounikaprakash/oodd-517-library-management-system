<p id="notice"><%= notice %></p>

<h1>Search Results</h1>

<table>
  <thead>
  <tr>
    <th>Isbn</th>
    <th>Title</th>
    <th>Author</th>
    <th>Language</th>
    <th>Published</th>
    <th>Edition</th>
    <th>Image</th>
    <th>Subject</th>
    <th>Summary</th>
    <th>Is special</th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% @books.each do |book| %>
    <tr>
      <td><%= book.isbn %></td>
      <td><%= book.title %></td>
      <td><%= book.author %></td>
      <td><%= book.language %></td>
      <td><%= book.published %></td>
      <td><%= book.edition %></td>
      <td><%= book.image %></td>
      <td><%= book.subject %></td>
      <td><%= book.summary %></td>
      <td><%= book.is_special %></td>
      <td><%= link_to 'Show', book %></td>
      <% if session[:user_type] == ApplicationController::TYPE_ADMIN or session[:user_type] == ApplicationController::TYPE_LIBRARIAN %>
        <td><%= link_to 'Edit', edit_book_path(book) %></td>
        <td><%= link_to 'Destroy', book, method: :delete, data: {confirm: 'Are you sure?'} %></td>
      <% else %>
        <td><%= link_to 'Issue book', new_book_request_url(:request_type => BookRequest::IS_NORMAL, :book_id => book.id, :library_id => params[:library_id]) %></td>
        <td><%= link_to 'Bookmark book', new_book_request_url(:request_type => BookRequest::IS_BOOKMARK, :book_id => book.id, :library_id => params[:library_id]) %></td>
      <% end %>
    </tr>
  <% end %>
  </tbody>
</table>

<br>
<td><%= link_to 'All books', books_path(:library_id => params[:library_id]) %></td>