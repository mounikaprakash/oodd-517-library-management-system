<p id="notice"><%= notice %></p>

<h1>Book Histories</h1>

<table>
  <thead>
  <tr>
    <th>Book</th>
    <th>Library</th>
    <th>Student</th>
    <th>Issued on</th>
    <th>Returned on</th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% @book_histories.each do |book_history| %>
    <tr>
      <td><%= book_history.book.title %></td>
      <td><%= book_history.library.name %></td>
      <td><%= book_history.student.email %></td>
      <td><%= book_history.created_at %></td>
      <td><%= book_history.action == BookHistory::ISSUED ? "Not yet returned" : book_history.updated_at %></td>
      <% if (session[:user_type] == ApplicationController::TYPE_STUDENT and params[:request_type] == BookHistory::ISSUED) %>
        <td><%= link_to 'Return book', "/book_histories/#{book_history.id}/return", data: {confirm: 'Are you sure?'} %></td>
      <% else %>
        <td><%= link_to 'Show', book_history %></td>
        <!--<td><%# link_to 'Edit', edit_book_history_path(book_history) %></td>-->
        <!--<td><%# link_to 'Destroy', book_history, method: :delete, data: {confirm: 'Are you sure?'} %></td>-->
      <% end %>
    </tr>
  <% end %>
  </tbody>
</table>

<br>
